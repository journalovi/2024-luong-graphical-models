{"version":3,"file":"244-90f690c56cd82b27f216.js","mappings":"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","sources":["webpack://graphical-models/./src/article/partIII/featureBreakdown.tsx"],"sourcesContent":["import { useEffect, useMemo, useState } from 'react'\nimport { CSSTransition } from 'react-transition-group'\nimport styled from 'styled-components'\n\nimport BalancedText from '@components/balancedText'\nimport SelectField, { Item } from '@components/fields/select'\nimport Grid from '@components/grid'\nimport GuideArrow from '@components/guideArrow'\nimport Panel from '@components/panel'\nimport PopoverArrow from '@components/popoverArrow'\nimport ShadowRoot from '@components/shadowRoot'\nimport Spinner from '@components/spinner'\nimport { Table, TableBody, TableFoot, TableHead, TD, TH, TR } from '@components/table'\n\nimport { debounce, decimalFlex, isDev } from '@utils/functions'\nimport useMobile from '@utils/useMobile'\n\nimport { nameTags } from '../constants'\n\nimport { BREAKDOWN_WORDS, BREAKDOWNS } from './utils'\n\nconst featureNameSortOrder = [\n\t'word',\n\t'shape',\n\t'lowercase',\n\t'is_title_case',\n\t'is_uppercase',\n\t'is_digit',\n\t'is_not_title_case',\n\t'is_not_uppercase',\n\t'is_not_digit',\n]\n\ntype NameTag = (typeof nameTags)[number]\ntype FeatureBreakdown = Array<{\n\tfeature: string\n\ttag: string\n\tvalue: number\n\tweight: number\n}>\ntype Breakdown = {\n\tfeatures: Partial<Record<NameTag, FeatureBreakdown>>\n\tsums: Partial<Record<NameTag, number>>\n\tprobabilities: Partial<Record<NameTag, number>>\n\tz: string | number\n}\n\nconst MEMMFeatureBreakdown = () => {\n\tconst [prevTag, setPrevTag] = useState<NameTag>('O')\n\tconst [currentTag, setCurrentTag] = useState<NameTag>('B-LOC')\n\tconst [word, setWord] = useState(BREAKDOWN_WORDS[0])\n\tconst [usedWord, setUsedWord] = useState('UK')\n\n\tconst [breakdown, setBreakdown] = useState<Breakdown>({\n\t\tfeatures: {},\n\t\tsums: {},\n\t\tprobabilities: {},\n\t\tz: 1,\n\t})\n\tconst [loading, setLoading] = useState(true)\n\tconst [initialized, setInitialized] = useState(false)\n\n\tconst debouncedUpdateBreakdown = useMemo(\n\t\t() =>\n\t\t\tdebounce<[{ word: string; prevTag: NameTag }]>(({ word, prevTag }) => {\n\t\t\t\tsetLoading(false)\n\t\t\t\tsetInitialized(true)\n\n\t\t\t\tconst prevTagIndex = nameTags.indexOf(prevTag)\n\t\t\t\tconst wordIndex = BREAKDOWN_WORDS.indexOf(word)\n\t\t\t\tsetBreakdown(BREAKDOWNS[prevTagIndex][wordIndex])\n\t\t\t\tsetUsedWord(word)\n\t\t\t}, 500),\n\t\t[],\n\t)\n\n\tuseEffect(() => {\n\t\tif (isDev) return\n\t\tdebouncedUpdateBreakdown({ word, prevTag })\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [word, prevTag])\n\n\tconst sortedFeatureBreakdown = useMemo(() => {\n\t\tconst currentTagBreakdown = breakdown.features[currentTag]\n\t\tif (!currentTagBreakdown) {\n\t\t\treturn []\n\t\t}\n\n\t\tfunction sortGroup(group: FeatureBreakdown) {\n\t\t\treturn group.sort((a, b) => {\n\t\t\t\treturn (\n\t\t\t\t\tfeatureNameSortOrder.findIndex((s) => s === a.feature.split('==')[0]) -\n\t\t\t\t\tfeatureNameSortOrder.findIndex((s) => s === b.feature.split('==')[0])\n\t\t\t\t)\n\t\t\t})\n\t\t}\n\n\t\treturn [\n\t\t\tsortGroup(currentTagBreakdown.filter((entry) => entry.value === 1)),\n\t\t\tsortGroup(currentTagBreakdown.filter((entry) => entry.value === 0)),\n\t\t].flat()\n\t}, [breakdown, currentTag])\n\n\tconst isMobile = useMobile()\n\tconst decimalPlaces = useMemo(() => (isMobile ? 2 : 3), [isMobile])\n\tconst sum = useMemo(() => breakdown.sums[currentTag], [breakdown, currentTag])\n\n\tconst breakdownContent = useMemo(\n\t\t() => (\n\t\t\t<BreakdownWrap raised>\n\t\t\t\t<StyledPopoverArrow size=\"l\" />\n\t\t\t\t<BreakdownHeader>\n\t\t\t\t\t<BreakdownHeading>\n\t\t\t\t\t\tCalculating p<sub>{prevTag}</sub>({currentTag} | &ldquo;{usedWord}&rdquo;)\n\t\t\t\t\t</BreakdownHeading>\n\t\t\t\t\t<BreakdownDescription>\n\t\t\t\t\t\t<BalancedText>\n\t\t\t\t\t\t\t{`With weights retrieved from a MEMM trained on CoNLL-2003 data. Numbers are rounded to ${decimalPlaces} decimal places for clarity.`}\n\t\t\t\t\t\t</BalancedText>\n\t\t\t\t\t</BreakdownDescription>\n\t\t\t\t\t<CSSTransition\n\t\t\t\t\t\tin={!isDev && (!initialized || loading)}\n\t\t\t\t\t\ttimeout={125}\n\t\t\t\t\t\tunmountOnExit\n\t\t\t\t\t\tappear\n\t\t\t\t\t>\n\t\t\t\t\t\t<LoadingSpinner\n\t\t\t\t\t\t\tlabel=\"Loading feature breakdown\"\n\t\t\t\t\t\t\tdiameter={16}\n\t\t\t\t\t\t\tstrokeWidth={2}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t</BreakdownHeader>\n\n\t\t\t\t<BreakdownContent>\n\t\t\t\t\t<BreakdownTableWrap>\n\t\t\t\t\t\t<BreakdownTable visible={initialized && !loading && !!sum}>\n\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t<col span={1} />\n\t\t\t\t\t\t\t\t<col span={1} />\n\t\t\t\t\t\t\t\t<col span={1} />\n\t\t\t\t\t\t\t\t<col span={1} />\n\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t\t\t<TR>\n\t\t\t\t\t\t\t\t\t<TH scope=\"column\" id=\"memm_feature_breakdown_header\">\n\t\t\t\t\t\t\t\t\t\tFeature-State Pair (a)\n\t\t\t\t\t\t\t\t\t</TH>\n\t\t\t\t\t\t\t\t\t<TH scope=\"column\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t&#955;<sub>a</sub>\n\t\t\t\t\t\t\t\t\t</TH>\n\t\t\t\t\t\t\t\t\t<TH scope=\"column\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\tf<sub>a</sub>\n\t\t\t\t\t\t\t\t\t</TH>\n\t\t\t\t\t\t\t\t\t<TH scope=\"column\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t&#955;<sub>a</sub>f<sub>a</sub>\n\t\t\t\t\t\t\t\t\t</TH>\n\t\t\t\t\t\t\t\t</TR>\n\t\t\t\t\t\t\t</TableHead>\n\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t{sortedFeatureBreakdown.map(({ feature, tag, weight, value }) => (\n\t\t\t\t\t\t\t\t\t<BreakdownTR key={feature + tag} inactive={value === 0}>\n\t\t\t\t\t\t\t\t\t\t<TH headers=\"memm_feature_breakdown_header\" scope=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t{feature} <LongEm>-</LongEm> {tag}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</TH>\n\t\t\t\t\t\t\t\t\t\t<TD align=\"right\">{decimalFlex(weight, decimalPlaces)}</TD>\n\t\t\t\t\t\t\t\t\t\t<TD align=\"right\">{value}</TD>\n\t\t\t\t\t\t\t\t\t\t<TD align=\"right\">{decimalFlex(value * weight, decimalPlaces)}</TD>\n\t\t\t\t\t\t\t\t\t</BreakdownTR>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t{new Array(8 - sortedFeatureBreakdown.length).fill(0).map((_, index) => (\n\t\t\t\t\t\t\t\t\t<TR aria-hidden=\"true\" key={index}>\n\t\t\t\t\t\t\t\t\t\t<TH headers=\"memm_feature_breakdown_header\">……</TH>\n\t\t\t\t\t\t\t\t\t\t<TD align=\"right\">…</TD>\n\t\t\t\t\t\t\t\t\t\t<TD align=\"right\">…</TD>\n\t\t\t\t\t\t\t\t\t\t<TD align=\"right\">…</TD>\n\t\t\t\t\t\t\t\t\t</TR>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t<TR aria-hidden=\"true\">\n\t\t\t\t\t\t\t\t\t<TH headers=\"memm_feature_breakdown_header\">……</TH>\n\t\t\t\t\t\t\t\t\t<TD align=\"right\">…</TD>\n\t\t\t\t\t\t\t\t\t<TD align=\"right\">…</TD>\n\t\t\t\t\t\t\t\t\t<TD align=\"right\">…</TD>\n\t\t\t\t\t\t\t\t</TR>\n\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t<BreakdownTableFoot>\n\t\t\t\t\t\t\t\t<TR aria-hidden=\"true\">\n\t\t\t\t\t\t\t\t\t<TH align=\"right\" colSpan={3}>\n\t\t\t\t\t\t\t\t\t\tSUM(&#955;<sub>a</sub>f<sub>a</sub>)\n\t\t\t\t\t\t\t\t\t</TH>\n\t\t\t\t\t\t\t\t\t<TD align=\"right\">{decimalFlex(sum ?? 0, decimalPlaces)}</TD>\n\t\t\t\t\t\t\t\t</TR>\n\t\t\t\t\t\t\t</BreakdownTableFoot>\n\t\t\t\t\t\t</BreakdownTable>\n\t\t\t\t\t</BreakdownTableWrap>\n\t\t\t\t\t<ProbabilityCalculation visible={initialized && !loading && !!sum}>\n\t\t\t\t\t\t<ProbabilityCalculationLeftWrap>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\tp<sub>{prevTag}</sub>({currentTag} | &ldquo;{usedWord}&rdquo;)&nbsp;\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</ProbabilityCalculationLeftWrap>\n\t\t\t\t\t\t<ProbabilityCalculationRightWrap>\n\t\t\t\t\t\t\t= e\n\t\t\t\t\t\t\t<sup>\n\t\t\t\t\t\t\t\tSUM(&#955;<sub>a</sub>f<sub>a</sub>)\n\t\t\t\t\t\t\t</sup>\n\t\t\t\t\t\t\t&nbsp; / Z\n\t\t\t\t\t\t\t<br />≈ e<sup>{decimalFlex(sum ?? 0, decimalPlaces)}</sup> /{' '}\n\t\t\t\t\t\t\t{decimalFlex(+breakdown.z ?? 0, decimalPlaces)}\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t≈&nbsp;\n\t\t\t\t\t\t\t<ProbabilityCalculationResult>\n\t\t\t\t\t\t\t\t{decimalFlex(breakdown.probabilities[currentTag] ?? 0, 3)}\n\t\t\t\t\t\t\t</ProbabilityCalculationResult>\n\t\t\t\t\t\t</ProbabilityCalculationRightWrap>\n\t\t\t\t\t</ProbabilityCalculation>\n\t\t\t\t\t<CSSTransition in={initialized && !sum} timeout={250} unmountOnExit appear>\n\t\t\t\t\t\t<NoObservationWrap>\n\t\t\t\t\t\t\t<NoObservationMessage>\n\t\t\t\t\t\t\t\t<BalancedText>\n\t\t\t\t\t\t\t\t\t{`The transition from ${prevTag} to ${currentTag} never occurred in the train set, so no applicable feature-state pair was found. The transition probability is 0.`}\n\t\t\t\t\t\t\t\t</BalancedText>\n\t\t\t\t\t\t\t</NoObservationMessage>\n\t\t\t\t\t\t</NoObservationWrap>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t</BreakdownContent>\n\t\t\t</BreakdownWrap>\n\t\t),\n\t\t[\n\t\t\tbreakdown,\n\t\t\tsortedFeatureBreakdown,\n\t\t\tsum,\n\t\t\tprevTag,\n\t\t\tcurrentTag,\n\t\t\tusedWord,\n\t\t\tinitialized,\n\t\t\tloading,\n\t\t\tdecimalPlaces,\n\t\t],\n\t)\n\n\treturn (\n\t\t<Wrap noPaddingOnMobile>\n\t\t\t<StyledPanel raised gridColumn=\"wide\">\n\t\t\t\t<ShadowRoot>\n\t\t\t\t\t<InputWrap>\n\t\t\t\t\t\t<PrevTagWrap>\n\t\t\t\t\t\t\t<SelectWrap>\n\t\t\t\t\t\t\t\t<SelectField\n\t\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\t\tskipFieldWrapper\n\t\t\t\t\t\t\t\t\tvalue={prevTag}\n\t\t\t\t\t\t\t\t\tonChange={setPrevTag}\n\t\t\t\t\t\t\t\t\taria-label=\"Previous name tag\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{nameTags.map((tag) => (\n\t\t\t\t\t\t\t\t\t\t<Item key={tag}>{tag}</Item>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t\t</SelectWrap>\n\t\t\t\t\t\t\t<StyledGuideArrow from=\"left\" to=\"right\" strokeWidth=\"2\" height={16} />\n\t\t\t\t\t\t</PrevTagWrap>\n\t\t\t\t\t\t<CurrentTagWrap>\n\t\t\t\t\t\t\t<WordInputWrap>\n\t\t\t\t\t\t\t\t<SelectField\n\t\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\t\tskipFieldWrapper\n\t\t\t\t\t\t\t\t\tvalue={word}\n\t\t\t\t\t\t\t\t\tonChange={(word) => setWord(word.replace(' ', ''))}\n\t\t\t\t\t\t\t\t\taria-label=\"Current word\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{BREAKDOWN_WORDS.map((word) => (\n\t\t\t\t\t\t\t\t\t\t<Item key={word}>{word}</Item>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t\t</WordInputWrap>\n\t\t\t\t\t\t\t<StyledGuideArrow from=\"top\" to=\"bottom\" strokeWidth=\"2\" width={16} />\n\t\t\t\t\t\t\t<SelectWrap>\n\t\t\t\t\t\t\t\t<SelectField\n\t\t\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\t\t\tskipFieldWrapper\n\t\t\t\t\t\t\t\t\tvalue={currentTag}\n\t\t\t\t\t\t\t\t\tonChange={setCurrentTag}\n\t\t\t\t\t\t\t\t\taria-label=\"Current name tag\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{nameTags.map((tag) => (\n\t\t\t\t\t\t\t\t\t\t<Item key={tag}>{tag}</Item>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectField>\n\t\t\t\t\t\t\t</SelectWrap>\n\t\t\t\t\t\t</CurrentTagWrap>\n\t\t\t\t\t</InputWrap>\n\t\t\t\t\t{breakdownContent}\n\t\t\t\t</ShadowRoot>\n\t\t\t</StyledPanel>\n\t\t</Wrap>\n\t)\n}\n\nexport default MEMMFeatureBreakdown\n\nconst Wrap = styled(Grid)`\n\tmargin-top: var(--adaptive-space-2);\n\tmargin-bottom: var(--adaptive-space-4);\n`\n\nconst StyledPanel = styled(Panel)`\n\t${(p) => p.theme.breakpoints.mobile} {\n\t\tpadding-left: 0;\n\t\tpadding-right: 0;\n\t}\n`\n\nconst LongEm = styled.span`\n\tdisplay: inline-block;\n\ttext-align: center;\n\ttransform: scaleX(2);\n`\n\nconst InputWrap = styled.div`\n\tdisplay: flex;\n\talign-items: end;\n\tjustify-content: center;\n\tborder-radius: var(--border-radius-m);\n\n\tpadding: var(--space-3) var(--space-4);\n\tmargin-bottom: var(--space-1);\n\n\tinput,\n\tbutton,\n\tspan {\n\t\ttext-align: center;\n\t\t${(p) => p.theme.vizText.body2};\n\t}\n\n\t${(p) => p.theme.breakpoints.mobile} {\n\t\tpadding-left: var(--page-margin-left);\n\t\tpadding-right: var(--page-margin-right);\n\t}\n`\n\nconst PrevTagWrap = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-end;\n`\n\nconst CurrentTagWrap = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\n\tmargin-right: var(--space-4);\n`\n\nconst StyledGuideArrow = styled(GuideArrow)`\n\tmargin: var(--space-0);\n`\n\nconst SelectWrap = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: inherit;\n\tmin-width: 6em;\n`\n\nconst WordInputWrap = styled.div`\n\tdisplay: flex;\n\tjustify-content: center;\n\twidth: 0;\n`\n\nconst BreakdownWrap = styled(Panel)`\n\tposition: relative;\n\tborder-left: 0;\n\tborder-right: 0;\n\tborder-bottom: 0;\n\t/* stylelint-disable declaration-block-no-redundant-longhand-properties */\n\tborder-top-left-radius: 0;\n\tborder-top-right-radius: 0;\n\tborder-bottom-left-radius: var(--border-radius-l);\n\tborder-bottom-right-radius: var(--border-radius-l);\n\t/* stylelint-enable declaration-block-no-redundant-longhand-properties */\n\tpadding: var(--space-3) var(--space-4) var(--space-3);\n\tbackground: var(--color-background-raised);\n\n\t${(p) => p.theme.breakpoints.mobile} {\n\t\tpadding-left: var(--page-margin-left);\n\t\tpadding-right: var(--page-margin-right);\n\t}\n`\n\nconst StyledPopoverArrow = styled(PopoverArrow)`\n\ttop: 0;\n\tleft: calc(50% + 3.75em);\n\tbackground: var(--color-background);\n`\n\nconst BreakdownHeader = styled.div`\n\tposition: relative;\n\tmargin-bottom: var(--space-2);\n`\n\nconst BreakdownHeading = styled.p`\n\t${(p) => p.theme.text.h5};\n\tmargin-bottom: var(--space-0);\n`\n\nconst BreakdownDescription = styled.small`\n\tdisplay: block;\n\tmax-width: 24rem;\n`\n\nconst LoadingSpinner = styled(Spinner)`\n\tposition: absolute;\n\ttop: 50%;\n\tright: 0;\n\ttransform: translateY(-50%);\n\tcolor: var(--color-label);\n\n\t${(p) => p.theme.transitionGroupFade}\n\ttransition: opacity var(--animation-v-fast-out);\n`\n\nconst BreakdownContent = styled.div`\n\tposition: relative;\n`\n\nconst BreakdownTableWrap = styled.div`\n\toverflow: auto;\n\n\tpadding-bottom: var(--space-2);\n\tpadding-left: var(--space-2);\n\tmargin-left: calc(var(--space-2) * -1);\n\tmargin-right: calc(var(--space-2) * -1);\n`\n\nconst BreakdownTable = styled(Table)<{ visible: boolean }>`\n\topacity: ${(p) => (p.visible ? 1 : 0)};\n\ttransition: opacity var(--animation-fast-out);\n\n\t/* Pseudo right padding when container is scrolling */\n\tborder-right: solid 16px transparent;\n\n\ttbody {\n\t\t${(p) => p.theme.vizText.body2}\n\t}\n\n\ttbody > tr:last-of-type {\n\t\tcolor: var(--color-label);\n\t\topacity: 0.75;\n\t}\n\n\ttfoot > & {\n\t\ttd,\n\t\tth {\n\t\t\tpadding-top: var(--space-2);\n\t\t}\n\t}\n\n\tcolgroup {\n\t\tcol:nth-child(1) {\n\t\t\twidth: calc(70% - 8em);\n\t\t}\n\t\tcol:nth-child(2) {\n\t\t\twidth: 6em;\n\t\t}\n\t\tcol:nth-child(3) {\n\t\t\twidth: 6em;\n\t\t}\n\t\tcol:nth-child(4) {\n\t\t\twidth: 6em;\n\t\t}\n\t}\n\n\t${(p) => p.theme.breakpoints.mobile} {\n\t\tcolgroup {\n\t\t\tcol:nth-child(1) {\n\t\t\t\twidth: calc(100% - 12em);\n\t\t\t}\n\t\t\tcol:nth-child(2) {\n\t\t\t\twidth: 4em;\n\t\t\t}\n\t\t\tcol:nth-child(3) {\n\t\t\t\twidth: 4em;\n\t\t\t}\n\t\t\tcol:nth-child(4) {\n\t\t\t\twidth: 4em;\n\t\t\t}\n\t\t}\n\t}\n`\n\nconst BreakdownTableFoot = styled(TableFoot)`\n\tth {\n\t\tcolor: var(--color-label);\n\t\tfont-weight: 500;\n\t}\n\ttd {\n\t\t${(p) => p.theme.vizText.body2}\n\t\tcolor: var(--color-heading);\n\t\tfont-weight: 500;\n\t}\n`\n\nconst BreakdownTR = styled(TR)<{ inactive?: boolean }>`\n\t${(p) => p.inactive && `color: var(--color-label);`}\n`\n\nconst ProbabilityCalculation = styled.p<{ visible: boolean }>`\n\tdisplay: flex;\n\tjustify-content: center;\n\tpadding-top: var(--space-3);\n\tborder-top: solid 1px var(--color-line);\n\n\tfont-weight: 600;\n\tfont-variant-numeric: tabular-nums;\n\tletter-spacing: 0.025em;\n\twhite-space: nowrap;\n\tcolor: var(--color-heading);\n\n\topacity: ${(p) => (p.visible ? 1 : 0)};\n\ttransition: opacity var(--animation-fast-out);\n`\n\nconst ProbabilityCalculationLeftWrap = styled.span`\n\tdisplay: flex;\n\tjustify-content: end;\n\tcolor: var(--color-heading);\n\twidth: 10em;\n`\n\nconst ProbabilityCalculationRightWrap = styled.span`\n\twidth: 10em;\n`\n\nconst ProbabilityCalculationResult = styled.span`\n\t${(p) => p.theme.text.h5};\n`\n\nconst NoObservationWrap = styled.div`\n\t${(p) => p.theme.spread}\n\t${(p) => p.theme.flexCenter};\n\tbackground: var(--color-background);\n\tborder: dashed 1px var(--color-line);\n\tborder-radius: var(--border-radius-m);\n\tpadding: var(--space-2);\n\n\t${(p) => p.theme.transitionGroupFade}\n\ttransition: opacity var(--animation-v-fast-out);\n`\n\nconst NoObservationMessage = styled.p`\n\t${(p) => p.theme.text.small};\n\tcolor: var(--color-label);\n\ttext-align: center;\n\tmax-width: 28em;\n`\n"],"names":["featureNameSortOrder","MEMMFeatureBreakdown","prevTag","setPrevTag","useState","currentTag","setCurrentTag","word","setWord","BREAKDOWN_WORDS","usedWord","setUsedWord","breakdown","setBreakdown","features","sums","probabilities","z","loading","setLoading","initialized","setInitialized","debouncedUpdateBreakdown","useMemo","debounce","prevTagIndex","nameTags","indexOf","wordIndex","BREAKDOWNS","useEffect","isDev","sortedFeatureBreakdown","currentTagBreakdown","sortGroup","group","sort","a","b","findIndex","s","feature","split","filter","entry","value","flat","isMobile","useMobile","decimalPlaces","sum","breakdownContent","_breakdown$z","_breakdown$probabilit","_jsxs","BreakdownWrap","raised","children","_jsx","StyledPopoverArrow","size","BreakdownHeader","BreakdownHeading","BreakdownDescription","BalancedText","CSSTransition","in","timeout","unmountOnExit","appear","LoadingSpinner","label","diameter","strokeWidth","BreakdownContent","BreakdownTableWrap","BreakdownTable","visible","span","TableHead","TR","TH","scope","id","align","TableBody","map","tag","weight","BreakdownTR","inactive","headers","LongEm","TD","decimalFlex","Array","length","fill","_","index","BreakdownTableFoot","colSpan","ProbabilityCalculation","ProbabilityCalculationLeftWrap","ProbabilityCalculationRightWrap","ProbabilityCalculationResult","NoObservationWrap","NoObservationMessage","Wrap","noPaddingOnMobile","StyledPanel","gridColumn","ShadowRoot","InputWrap","PrevTagWrap","SelectWrap","SelectField","small","skipFieldWrapper","onChange","Item","StyledGuideArrow","from","to","height","CurrentTagWrap","WordInputWrap","replace","width","styled","Grid","withConfig","displayName","componentId","Panel","p","theme","breakpoints","mobile","div","vizText","body2","GuideArrow","PopoverArrow","text","h5","Spinner","transitionGroupFade","Table","TableFoot","spread","flexCenter"],"sourceRoot":""}