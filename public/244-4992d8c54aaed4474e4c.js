"use strict";(self.webpackChunkgraphical_models=self.webpackChunkgraphical_models||[]).push([[244],{4244:function(e,a,t){t.r(a);var i=t(7294),r=t(7723),n=t(2788),o=t(4144),d=t(9135),s=t(9928),l=t(410),c=t(9142),p=t(2440),h=t(9611),u=t(3609),m=t(5479),g=t(5420),f=t(5456),x=t(5693),b=t(3930),w=t(5893);const j=["word","shape","lowercase","is_title_case","is_uppercase","is_digit","is_not_title_case","is_not_uppercase","is_not_digit"];a.default=()=>{const[e,a]=(0,i.useState)("O"),[t,n]=(0,i.useState)("B-LOC"),[s,l]=(0,i.useState)(b.A[0]),[c,p]=(0,i.useState)("UK"),[u,K]=(0,i.useState)({features:{},sums:{},probabilities:{},z:1}),[X,Y]=(0,i.useState)(!0),[q,J]=(0,i.useState)(!1),Q=(0,i.useMemo)((()=>(0,g.Ds)((({word:e,prevTag:a})=>{Y(!1),J(!0);const t=x.Hj.indexOf(a),i=b.A.indexOf(e);K(b.o[t][i]),p(e)}),500)),[]);(0,i.useEffect)((()=>{g.r8||Q({word:s,prevTag:e})}),[s,e]);const V=(0,i.useMemo)((()=>{const e=u.features[t];if(!e)return[];function a(e){return e.sort(((e,a)=>j.findIndex((a=>a===e.feature.split("==")[0]))-j.findIndex((e=>e===a.feature.split("==")[0]))))}return[a(e.filter((e=>1===e.value))),a(e.filter((e=>0===e.value)))].flat()}),[u,t]),ee=(0,f.Z)(),ae=(0,i.useMemo)((()=>ee?2:3),[ee]),te=(0,i.useMemo)((()=>u.sums[t]),[u,t]),ie=(0,i.useMemo)((()=>{var a,i;return(0,w.jsxs)(W,{raised:!0,children:[(0,w.jsx)(S,{size:"l"}),(0,w.jsxs)(Z,{children:[(0,w.jsxs)(R,{children:["Calculating p",(0,w.jsx)("sub",{children:e}),"(",t," | “",c,"”)"]}),(0,w.jsx)(H,{children:(0,w.jsx)(o.Z,{children:`With weights retrieved from a MEMM trained on CoNLL-2003 data. Numbers are rounded to ${ae} decimal places for clarity.`})}),(0,w.jsx)(r.Z,{in:!g.r8&&(!q||X),timeout:125,unmountOnExit:!0,appear:!0,children:(0,w.jsx)(M,{label:"Loading feature breakdown",diameter:16,strokeWidth:2})})]}),(0,w.jsxs)(P,{children:[(0,w.jsx)(D,{children:(0,w.jsxs)(O,{visible:q&&!X&&!!te,children:[(0,w.jsxs)("colgroup",{children:[(0,w.jsx)("col",{span:1}),(0,w.jsx)("col",{span:1}),(0,w.jsx)("col",{span:1}),(0,w.jsx)("col",{span:1})]}),(0,w.jsx)(m.ss,{children:(0,w.jsxs)(m.TR,{children:[(0,w.jsx)(m.TH,{scope:"column",id:"memm_feature_breakdown_header",children:"Feature-State Pair (a)"}),(0,w.jsxs)(m.TH,{scope:"column",align:"right",children:["λ",(0,w.jsx)("sub",{children:"a"})]}),(0,w.jsxs)(m.TH,{scope:"column",align:"right",children:["f",(0,w.jsx)("sub",{children:"a"})]}),(0,w.jsxs)(m.TH,{scope:"column",align:"right",children:["λ",(0,w.jsx)("sub",{children:"a"}),"f",(0,w.jsx)("sub",{children:"a"})]})]})}),(0,w.jsxs)(m.RM,{children:[V.map((({feature:e,tag:a,weight:t,value:i})=>(0,w.jsxs)(F,{inactive:0===i,children:[(0,w.jsx)(m.TH,{headers:"memm_feature_breakdown_header",scope:"row",children:(0,w.jsxs)("span",{children:[e," ",(0,w.jsx)(k,{children:"-"})," ",a]})}),(0,w.jsx)(m.TD,{align:"right",children:(0,g.Rt)(t,ae)}),(0,w.jsx)(m.TD,{align:"right",children:i}),(0,w.jsx)(m.TD,{align:"right",children:(0,g.Rt)(i*t,ae)})]},e+a))),new Array(8-V.length).fill(0).map(((e,a)=>(0,w.jsxs)(m.TR,{"aria-hidden":"true",children:[(0,w.jsx)(m.TH,{headers:"memm_feature_breakdown_header",children:"……"}),(0,w.jsx)(m.TD,{align:"right",children:"…"}),(0,w.jsx)(m.TD,{align:"right",children:"…"}),(0,w.jsx)(m.TD,{align:"right",children:"…"})]},a))),(0,w.jsxs)(m.TR,{"aria-hidden":"true",children:[(0,w.jsx)(m.TH,{headers:"memm_feature_breakdown_header",children:"……"}),(0,w.jsx)(m.TD,{align:"right",children:"…"}),(0,w.jsx)(m.TD,{align:"right",children:"…"}),(0,w.jsx)(m.TD,{align:"right",children:"…"})]})]}),(0,w.jsx)(A,{children:(0,w.jsxs)(m.TR,{"aria-hidden":"true",children:[(0,w.jsxs)(m.TH,{align:"right",colSpan:3,children:["SUM(λ",(0,w.jsx)("sub",{children:"a"}),"f",(0,w.jsx)("sub",{children:"a"}),")"]}),(0,w.jsx)(m.TD,{align:"right",children:(0,g.Rt)(null!=te?te:0,ae)})]})})]})}),(0,w.jsxs)(L,{visible:q&&!X&&!!te,children:[(0,w.jsx)(z,{children:(0,w.jsxs)("span",{children:["p",(0,w.jsx)("sub",{children:e}),"(",t," | “",c,"”) "]})}),(0,w.jsxs)(E,{children:["= e",(0,w.jsxs)("sup",{children:["SUM(λ",(0,w.jsx)("sub",{children:"a"}),"f",(0,w.jsx)("sub",{children:"a"}),")"]}),"  / Z",(0,w.jsx)("br",{}),"≈ e",(0,w.jsx)("sup",{children:(0,g.Rt)(null!=te?te:0,ae)})," /"," ",(0,g.Rt)(null!==(a=+u.z)&&void 0!==a?a:0,ae),(0,w.jsx)("br",{}),"≈ ",(0,w.jsx)(G,{children:(0,g.Rt)(null!==(i=u.probabilities[t])&&void 0!==i?i:0,3)})]})]}),(0,w.jsx)(r.Z,{in:q&&!te,timeout:250,unmountOnExit:!0,appear:!0,children:(0,w.jsx)(U,{children:(0,w.jsx)($,{children:(0,w.jsx)(o.Z,{children:`The transition from ${e} to ${t} never occurred in the train set, so no applicable feature-state pair was found. The transition probability is 0.`})})})})]})]})}),[u,V,te,e,t,c,q,X,ae]);return(0,w.jsx)(v,{noPaddingOnMobile:!0,children:(0,w.jsx)(_,{raised:!0,gridColumn:"wide",children:(0,w.jsxs)(h.Z,{children:[(0,w.jsxs)(y,{children:[(0,w.jsxs)(C,{children:[(0,w.jsx)(I,{children:(0,w.jsx)(d.ZP,{small:!0,skipFieldWrapper:!0,value:e,onChange:a,"aria-label":"Previous name tag",children:x.Hj.map((e=>(0,w.jsx)(d.ck,{children:e},e)))})}),(0,w.jsx)(T,{from:"left",to:"right",strokeWidth:"2",height:16})]}),(0,w.jsxs)(B,{children:[(0,w.jsx)(I,{children:(0,w.jsx)(d.ZP,{small:!0,skipFieldWrapper:!0,value:t,onChange:n,"aria-label":"Current name tag",children:x.Hj.map((e=>(0,w.jsx)(d.ck,{children:e},e)))})}),(0,w.jsx)(T,{from:"bottom",to:"top",strokeWidth:"2",width:16}),(0,w.jsx)(N,{children:(0,w.jsx)(d.ZP,{small:!0,skipFieldWrapper:!0,value:s,onChange:e=>l(e.replace(" ","")),"aria-label":"Current word",children:b.A.map((e=>(0,w.jsx)(d.ck,{children:e},e)))})})]})]}),ie]})})})};const v=(0,n.default)(s.Z).withConfig({displayName:"featureBreakdown__Wrap",componentId:"sc-60gto8-0"})(["margin-top:var(--adaptive-space-2);margin-bottom:var(--adaptive-space-4);"]),_=(0,n.default)(c.Z).withConfig({displayName:"featureBreakdown__StyledPanel",componentId:"sc-60gto8-1"})(["","{padding-left:0;padding-right:0;}"],(e=>e.theme.breakpoints.mobile)),k=n.default.span.withConfig({displayName:"featureBreakdown__LongEm",componentId:"sc-60gto8-2"})(["display:inline-block;text-align:center;transform:scaleX(2);"]),y=n.default.div.withConfig({displayName:"featureBreakdown__InputWrap",componentId:"sc-60gto8-3"})(["display:flex;align-items:start;justify-content:center;border-radius:var(--border-radius-m);padding:var(--space-3) var(--space-4);margin-bottom:var(--space-1);input,button,span{text-align:center;",";}","{padding-left:var(--page-margin-left);padding-right:var(--page-margin-right);}"],(e=>e.theme.vizText.body2),(e=>e.theme.breakpoints.mobile)),C=n.default.div.withConfig({displayName:"featureBreakdown__PrevTagWrap",componentId:"sc-60gto8-4"})(["display:flex;align-items:center;justify-content:flex-end;"]),B=n.default.div.withConfig({displayName:"featureBreakdown__CurrentTagWrap",componentId:"sc-60gto8-5"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;margin-right:var(--space-4);"]),T=(0,n.default)(l.Z).withConfig({displayName:"featureBreakdown__StyledGuideArrow",componentId:"sc-60gto8-6"})(["margin:var(--space-0);"]),I=n.default.div.withConfig({displayName:"featureBreakdown__SelectWrap",componentId:"sc-60gto8-7"})(["display:flex;flex-direction:row;justify-content:inherit;min-width:6em;"]),N=n.default.div.withConfig({displayName:"featureBreakdown__WordInputWrap",componentId:"sc-60gto8-8"})(["display:flex;justify-content:center;width:0;"]),W=(0,n.default)(c.Z).withConfig({displayName:"featureBreakdown__BreakdownWrap",componentId:"sc-60gto8-9"})(["position:relative;border-left:0;border-right:0;border-bottom:0;border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:var(--border-radius-l);border-bottom-right-radius:var(--border-radius-l);padding:var(--space-3) var(--space-4) var(--space-3);background:var(--color-background-raised);","{padding-left:var(--page-margin-left);padding-right:var(--page-margin-right);}"],(e=>e.theme.breakpoints.mobile)),S=(0,n.default)(p.Z).withConfig({displayName:"featureBreakdown__StyledPopoverArrow",componentId:"sc-60gto8-10"})(["top:0;left:calc(50% + 3.75em);background:var(--color-background);"]),Z=n.default.div.withConfig({displayName:"featureBreakdown__BreakdownHeader",componentId:"sc-60gto8-11"})(["position:relative;margin-bottom:var(--space-2);"]),R=n.default.p.withConfig({displayName:"featureBreakdown__BreakdownHeading",componentId:"sc-60gto8-12"})(["",";margin-bottom:var(--space-0);"],(e=>e.theme.text.h5)),H=n.default.small.withConfig({displayName:"featureBreakdown__BreakdownDescription",componentId:"sc-60gto8-13"})(["display:block;max-width:24rem;"]),M=(0,n.default)(u.Z).withConfig({displayName:"featureBreakdown__LoadingSpinner",componentId:"sc-60gto8-14"})(["position:absolute;top:50%;right:0;transform:translateY(-50%);color:var(--color-label);"," transition:opacity var(--animation-v-fast-out);"],(e=>e.theme.transitionGroupFade)),P=n.default.div.withConfig({displayName:"featureBreakdown__BreakdownContent",componentId:"sc-60gto8-15"})(["position:relative;"]),D=n.default.div.withConfig({displayName:"featureBreakdown__BreakdownTableWrap",componentId:"sc-60gto8-16"})(["overflow:auto;padding-bottom:var(--space-2);padding-left:var(--space-2);margin-left:calc(var(--space-2) * -1);margin-right:calc(var(--space-2) * -1);"]),O=(0,n.default)(m.iA).withConfig({displayName:"featureBreakdown__BreakdownTable",componentId:"sc-60gto8-17"})(["opacity:",";transition:opacity var(--animation-fast-out);border-right:solid 16px transparent;tbody{","}tbody > tr:last-of-type{color:var(--color-label);opacity:0.75;}tfoot > &{td,th{padding-top:var(--space-2);}}colgroup{col:nth-child(1){width:calc(70% - 8em);}col:nth-child(2){width:6em;}col:nth-child(3){width:6em;}col:nth-child(4){width:6em;}}","{colgroup{col:nth-child(1){width:calc(100% - 12em);}col:nth-child(2){width:4em;}col:nth-child(3){width:4em;}col:nth-child(4){width:4em;}}}"],(e=>e.visible?1:0),(e=>e.theme.vizText.body2),(e=>e.theme.breakpoints.mobile)),A=(0,n.default)(m.j2).withConfig({displayName:"featureBreakdown__BreakdownTableFoot",componentId:"sc-60gto8-18"})(["th{color:var(--color-label);font-weight:500;}td{"," color:var(--color-heading);font-weight:500;}"],(e=>e.theme.vizText.body2)),F=(0,n.default)(m.TR).withConfig({displayName:"featureBreakdown__BreakdownTR",componentId:"sc-60gto8-19"})(["",""],(e=>e.inactive&&"color: var(--color-label);")),L=n.default.p.withConfig({displayName:"featureBreakdown__ProbabilityCalculation",componentId:"sc-60gto8-20"})(["display:flex;justify-content:center;padding-top:var(--space-3);border-top:solid 1px var(--color-line);font-weight:600;font-variant-numeric:tabular-nums;letter-spacing:0.025em;white-space:nowrap;color:var(--color-heading);opacity:",";transition:opacity var(--animation-fast-out);"],(e=>e.visible?1:0)),z=n.default.span.withConfig({displayName:"featureBreakdown__ProbabilityCalculationLeftWrap",componentId:"sc-60gto8-21"})(["display:flex;justify-content:end;color:var(--color-heading);width:10em;"]),E=n.default.span.withConfig({displayName:"featureBreakdown__ProbabilityCalculationRightWrap",componentId:"sc-60gto8-22"})(["width:10em;"]),G=n.default.span.withConfig({displayName:"featureBreakdown__ProbabilityCalculationResult",componentId:"sc-60gto8-23"})(["",";"],(e=>e.theme.text.h5)),U=n.default.div.withConfig({displayName:"featureBreakdown__NoObservationWrap",componentId:"sc-60gto8-24"})([""," ",";background:var(--color-background);border:dashed 1px var(--color-line);border-radius:var(--border-radius-m);padding:var(--space-2);"," transition:opacity var(--animation-v-fast-out);"],(e=>e.theme.spread),(e=>e.theme.flexCenter),(e=>e.theme.transitionGroupFade)),$=n.default.p.withConfig({displayName:"featureBreakdown__NoObservationMessage",componentId:"sc-60gto8-25"})(["",";color:var(--color-label);text-align:center;max-width:28em;"],(e=>e.theme.text.small))}}]);
//# sourceMappingURL=244-4992d8c54aaed4474e4c.js.map